# Домашнее задание к занятию 1. "Типы и структура СУБД"
## Задача 1.
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.
- Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.
### Ответ
- Электронные чеки в json виде

Здесь подойдет документоориентированная СУБД, т. к. в качестве объекта хранения выступает документ определенного шаблона в конкретном формате json. А в качестве ключа выступает идентификатор.
- Склады и автомобильные дороги для логистической компании

Здесь можно выбрать графовый тип СУБД, где склады представляют собой узлы, а дороги - ребра графа.
- Генеалогические деревья

В данном случае сетевая СУБД подойдет лучше всего, т. к. в этом случае у потомка может быть несколько связей с несколькими родителями. Можно также использовать графовую СУБД.
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации

Подойдет СУБД ключ-значение, где ключ - идентификатор, а значение - имя клиента
- Отношения клиент-покупка для интернет-магазина

Подойдет реляционная СУБД, т. к. у интернет-магазина много клиентов, покупок, товаров и каждая из этих сущностей обладает множеством свойств. Образуется множество связей и отношений, которые нужно фиксировать в момент покупки и проводить анализ продаж по различным срезам.


## Задача 2.

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

### Ответ

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)

**CAP**: AP. Система доступна и возможно устойчива к разделению, но большая задержка делает данные несогласованными.

**PACELC**: PA/EL. В нормальном режиме - низкая задержка, но данные не согласованы. При разделении данные доступны, но также не согласованы.

- При сетевых сбоях, система может разделиться на 2 раздельных кластера

**CAP**: Система устойчива к разделению. Предполагаем, что 2 раздельных кластера - это 2 доступных кластера. Значит, AP: система доступна, но данные между ними не согласованы.

**PACELC**: PA/EC или PA/EL.

- Система может не прислать корректный ответ или сбросить соединение

**CAP**: CP не гарантирует целостность данных и способна работать в условиях распада в ущерб доступности, не выдавая отклик на запрос. Если система дает некорректный ответ, значит она несогласована: AP.

**PACELC**: Некорректный ответ: PA/EL. Cистема сбрасывает соединение: EC/PC.

## Задача 3.

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Ответ

Эти принципы могут сочетаться в одной системе, если использовать две разные СУБД. Одна будет отвечать требованиям ACID, а другая - BASE. В рамках одной СУБД эти принципы противоречат друг другу.

## Задача 4.

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора данной системы?

### Ответ

Key-value хранилище, которое имеет механизм Pub/Sub - это Redis.

Недостатки Redis:

- Всего лишь один поток для работы – крупные организации не смогут показывать нужную производительность;
- Недостаточно серьёзная защита данных – Redis не сумел пройти проверку ACID;
- В транзакциях возможна потеря данных – в случае взлома или внесения изменений в программный код, это серьёзный результат.

Но, он имеет весомые преимущества, такие как масштабируемость или простота в освоении.